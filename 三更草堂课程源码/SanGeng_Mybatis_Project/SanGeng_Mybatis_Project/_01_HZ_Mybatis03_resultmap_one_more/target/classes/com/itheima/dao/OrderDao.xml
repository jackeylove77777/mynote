<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.itheima.dao.OrderDao">

    <!--自定义列名和属性的映射关系-->
    <!--
        resultMap
            id属性  相当于这映射的唯一标识
            type属性  用这属性来指定要映射到哪个实体类
            id标签 用来指定主键列和主键对应的属性名
            result标签  用来指定普通列和属性的映射
                    property 要映射的属性名
                    column   对应的列名
    -->
<!--    id  ordertime   total     uid      id  username  password  birthday       oid

    2  2018-12-12    4000       1       1  lucy      123       2018-12-12         2-->
    <!--<resultMap id="orderMap" type="com.itheima.domain.Order">-->
        <!--<id property="id" column="oid"></id>-->
        <!--<result property="ordertime" column="ordertime"></result>-->
        <!--<result property="total" column="total"></result>-->
        <!--<result property="user.id" column="uid"></result>-->
        <!--<result property="user.username" column="username"></result>-->
        <!--<result property="user.password" column="password"></result>-->
        <!--<result property="user.birthday" column="birthday"></result>-->
    <!--</resultMap>-->

<!--
    id  ordertime    total     uid      id  username  password  birthday       oid
    2  2018-12-12    4000       1       1  lucy      123       2018-12-12         2-->
    <resultMap id="orderMap" type="com.itheima.domain.Order">
        <id property="id" column="oid"></id>
        <result property="ordertime" column="ordertime"></result>
        <result property="total" column="total"></result>
        <association property="user" javaType="com.itheima.domain.User">
            <id property="id" column="uid"></id>
            <result property="username" column="username"></result>
            <result property="password" column="password"></result>
            <result property="birthday" column="birthday"></result>
        </association>
    </resultMap>


    <select id="selectById" resultMap="orderMap">
        SELECT *,o.`id` oid FROM orders o,USER u WHERE o.`uid`=u.`id` AND o.id = #{id}
    </select>
</mapper>